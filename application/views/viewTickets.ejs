<script>
  var bodyclass=document.createAttribute("class");
  bodyclass.value="view-tickets-body";
  document.getElementsByTagName("body")[0].setAttributeNode(bodyclass);
</script>

<div class="page-wrapper view-tickets">
  <%- include('partials/navbarMain.ejs') %>
  <%- include('partials/sidebarMain.ejs') %>
  <div class='tickets-card'>
    <div class='workflow-order-header card'>
      
      <div class='header-description'>
        <h1 class=''>Order Workflow <span class='text-blue' id="department-select"> - All Departments</span></h1>
        <!-- <p>All jobs tickets can be found in the departments below.</p> -->
      </div>
      <div class="alert-box full-width">
          <%- include ("flashMessages") %>
      </div>
      
      <%- include('partials/workflow-navigation.ejs') %>
      <%- include('partials/workflow-sorting-filtering.ejs') %>

    </div>

    <div class='scroll-curtain'></div>
    
    <!--- Order Prep Department Start -->
      <% const orderPrepDepartmentName = 'ORDER-PREP' %>
      <% const orderPrepTicketsGroupedByDepartmentStatus = ticketsGroupedByDestination[orderPrepDepartmentName] %>
      <% const numberOfOrderPrepTickets = Object.values(orderPrepTicketsGroupedByDepartmentStatus).flat().length %>
      <div class='department-wrapper' data-department="<%= orderPrepDepartmentName %>">
        <h4 class='department-name'>Order Prep - <span class='text-blue' id='departmentTotalTickets'><%= numberOfOrderPrepTickets %></span></h4>
        
        <!-- Order Prep | Needs Attention -->
        <% const orderPrepNeedsAttentionTickets = orderPrepTicketsGroupedByDepartmentStatus['NEEDS ATTENTION'] %>
        <%- include('partials/ticket-table.ejs', {
          department: 'Order Prep',
          departmentStatus: 'Needs Attention',
          tableName: 'order-prep-needs-attention',
          tickets: orderPrepNeedsAttentionTickets,
          totalNumberOfTicketsInThisDepartment: numberOfOrderPrepTickets,
          columns: {
            1: 'row-number',
            2: 'ticket-number',
            3: 'priority',
            4: '',
            5: '',
            6: '',
            7: '',
            8: 'due-date'
          },
          data: {
            tickets: orderPrepNeedsAttentionTickets
          }
        }) %>

        <!-- Order Prep | On Hold -->
        <% const orderPrepOnHold = orderPrepTicketsGroupedByDepartmentStatus['ON HOLD'] %>
        <div class='status-section on-hold-status red-master card'>
          <div class='side-bumper'></div>
          <span>Order Prep - <%= numberOfOrderPrepTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>On Hold - <span class='category-ticket-count'><%= orderPrepOnHold.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Hold Reason</div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'></div>
              <div class='column-header column-header-h'></div>
              <div class='column-header column-header-i'></div>
            </div>
            <div id='order-prep-on-hold-table' class='table-body flex-center-center-column'>
              <% orderPrepOnHold.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width order-prep-on-hold-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %> </div>
                  <div class='column-td column-td-d bg-white department-status-column'>ON HOLD</div>
                  <div class='column-td column-td-e bg-white on-hold-status-cell'>
                    <span class='on-hold-reason-text'><%= ticket.departmentToHoldReason && ticket.departmentToHoldReason.get(orderPrepDepartmentName) %></span>
                    <%- include('partials/on-hold-dropdown', {
                      allHoldReasonsForThisDepartment: departmentToHoldReasons[orderPrepDepartmentName],
                      departmentName: orderPrepDepartmentName,
                      ticketId: ticket.id
                      }) 
                    -%>
                  </div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white'></div>
                  <div class='column-td column-td-h bg-white'></div>
                  <div class='column-td column-td-i bg-white'></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Order Prep | Proofing Complete -->
        <% const orderPrepProofingComplete = orderPrepTicketsGroupedByDepartmentStatus['PROOFING COMPLETE'] %>
        <div class='status-section send-to-customer-status green-master card'>
          <div class='side-bumper'></div>
          <span>Order Prep - <%= numberOfOrderPrepTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Proofing Complete - <span class='category-ticket-count'><%= orderPrepProofingComplete.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'></div>
              <div class='column-header column-header-h'></div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='order-prep-proofing-complete-table' class='table-body flex-center-center-column'>
              <% orderPrepProofingComplete.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width order-prep-proofing-complete-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-purple text-white department-status-column'>PROOFING COMPLETE</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white'></div>
                  <div class='column-td column-td-h bg-white'></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Order Prep | Waiting on Customer -->
        <% const orderPrepWaitingOnCustomerTickets = orderPrepTicketsGroupedByDepartmentStatus['WAITING ON CUSTOMER'] %>
        <div class='status-section light-blue-master card'>
          <div class='side-bumper'></div>
          <span>Order Prep - <%= numberOfOrderPrepTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Waiting On Customer - <span class='category-ticket-count'><%= orderPrepWaitingOnCustomerTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'>Follow Up Date</div>
              <div class='column-header column-header-h'>Sent Date</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='order-prep-waiting-on-customer-table' class='table-body flex-center-center-column'>
              <% orderPrepWaitingOnCustomerTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width order-prep-waiting-on-customer-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
                ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket,
                      departmentName: orderPrepDepartmentName
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>WAITING ON CUSTOMER</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white follow-up-date-column'><%- include('partials/follow-up-date-picker', {ticket: ticket}) -%></div>
                  <div class='column-td column-td-h bg-white'>*TODO*</div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Order Prep | Waiting on Approval -->
        <% const orderPrepWaitingOnApproval = orderPrepTicketsGroupedByDepartmentStatus['WAITING ON APPROVAL'] %>
        <div class='status-section orange-master card'>
          <div class='side-bumper'></div>
          <span>Order Prep - <%= numberOfOrderPrepTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Waiting On Approval- <span class='category-ticket-count'><%= orderPrepWaitingOnApproval.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'>Follow Up Date</div>
              <div class='column-header column-header-h'>Sent Date</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='order-prep-waiting-on-approval-table' class='table-body flex-center-center-column'>
              <% orderPrepWaitingOnApproval.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width order-prep-waiting-on-approval-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
                ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>WAITING ON APPROVAL</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white follow-up-date-column'>*TODO*</div>
                  <div class='column-td column-td-h bg-white'>*TODO*</div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>
      </div>
      <div class="department-end-frame flex-center-center-row full-width">
        <div class="department-divide-line"></div><h4>End Order Prep</h4><div class="department-divide-line"></div>
      </div>

      <!--- Art Prep Department Start -->
      <% const artPrepDepartmentName = 'ART-PREP' %> 
      <% const artPrepTicketsGroupedByDepartmentStatus = ticketsGroupedByDestination[artPrepDepartmentName] %>
      <% const numberOfArtPrepTickets = Object.values(artPrepTicketsGroupedByDepartmentStatus).flat().length %>
      <div class='department-wrapper' data-department="<%= artPrepDepartmentName %>">
        <h4 class='department-name'>Art Prep - <span class='text-blue' id='departmentTotalTickets'><%= numberOfArtPrepTickets %></span></h4>
        
        <!-- Art Prep | Needs Attention -->
        <% const artPrepNeedsAttentionTickets = artPrepTicketsGroupedByDepartmentStatus['NEEDS ATTENTION'] %>
        <div class='status-section needs-attention-status card'>
          <div class='side-bumper'></div>
          <span>Art Prep - <%= numberOfArtPrepTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Needs Attention - <span class='category-ticket-count'><%= artPrepNeedsAttentionTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'></div>
              <div class='column-header column-header-h'>From</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='art-prep-needs-attention-table' class='table-body flex-center-center-column'>
              <% artPrepNeedsAttentionTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width art-prep-needs-attention-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>NEEDS ATTENTION</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white'></div>
                  <div class='column-td column-td-h bg-white'>
                    <div class='user-cell bg-blue tooltip'>SV
                      <%- include('partials/assignee.ejs') -%>
                  </div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Art Prep | On Hold -->
        <% const artPrepOnHold = artPrepTicketsGroupedByDepartmentStatus['ON HOLD'] %>
        <div class='status-section on-hold-status red-master card'>
          <div class='side-bumper'></div>
          <span>Art Prep - <%= numberOfOrderPrepTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>On Hold - <span class='category-ticket-count'><%= artPrepOnHold.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Hold Reason</div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'></div>
              <div class='column-header column-header-h'>From</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='art-prep-on-hold-table' class='table-body flex-center-center-column'>
              <% artPrepOnHold.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width art-prep-on-hold-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %> </div>
                  <div class='column-td column-td-d bg-white department-status-column'>ON HOLD</div>
                  <div class='column-td column-td-e bg-white on-hold-status-cell'>
                    <span class='on-hold-reason-text'><%= ticket.departmentToHoldReason && ticket.departmentToHoldReason.get(artPrepDepartmentName) %></span>
                    <%- include('partials/on-hold-dropdown', {
                      allHoldReasonsForThisDepartment: departmentToHoldReasons[artPrepDepartmentName],
                      departmentName: artPrepDepartmentName,
                      ticketId: ticket.id
                      }) 
                    -%>
                  </div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white'></div>
                  <div class='column-td column-td-h bg-white'></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Art Prep | In Progress -->
        <% const artPrepInProgressTickets = artPrepTicketsGroupedByDepartmentStatus['IN PROGRESS'] %>
        <div class='status-section in-progress-status green-master card'>
          <div class='side-bumper'></div>
          <span>Art Prep - <%= numberOfArtPrepTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>In Progress - <span class='category-ticket-count'><%= artPrepInProgressTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Location</div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'></div>
              <div class='column-header column-header-h'></div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='art-prep-in-progress-table' class='table-body flex-center-center-column'>
              <% artPrepInProgressTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width art-prep-in-progress-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-purple text-white department-status-column'>IN PROGRESS</div>
                  <div class='column-td column-td-e bg-white'>
                    <%- include('partials/assignee.ejs') -%>
                  </div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white'></div>
                  <div class='column-td column-td-h bg-white'></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Art Prep | Needs Proof -->
        <% const artPrepNeedsProofTickets = artPrepTicketsGroupedByDepartmentStatus['NEEDS PROOF'] %>
        <div class='status-section needs-proof-status orange-master card'>
          <div class='side-bumper'></div>
          <span>Art Prep - <%= numberOfArtPrepTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Needs Proof - <span class='category-ticket-count'><%= artPrepNeedsProofTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'></div>
              <div class='column-header column-header-h'>Proofs</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='art-prep-needs-proof-table' class='table-body flex-center-center-column'>
              <% artPrepNeedsProofTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width art-prep-needs-proof-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>NEEDS PROOF</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white'></div>
                  <div class='column-td column-td-h bg-white'><%= ticket.numberOfProofsThatHaveNotBeenUploadedYet || 'N/A' %> </div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>
      </div>
      <div class="department-end-frame flex-center-center-row full-width">
        <div class="department-divide-line"></div><h4>End Art Prep</h4><div class="department-divide-line"></div>
      </div>

      <!--- Pre Printing Department Start -->
      <% const prePrintingDepartmentName = 'PRE-PRINTING' %>
      <% const prePrintingTicketsGroupedByDepartmentStatus = ticketsGroupedByDestination[prePrintingDepartmentName] %>
      <% const numberOfPrePrintingTickets = Object.values(prePrintingTicketsGroupedByDepartmentStatus).flat().length %>
      <div class='department-wrapper' data-department="<%= prePrintingDepartmentName %>">
        <h4 class='department-name'>Pre-Printing - <span class='text-blue' id='departmentTotalTickets'><%= numberOfPrePrintingTickets %></span></h4>
        
        <!-- Pre Printing | Needs Attention -->
        <% const prePrintingNeedsAttentionTickets = prePrintingTicketsGroupedByDepartmentStatus['NEEDS ATTENTION'] %>
        <div class='status-section purple-master card'>
          <div class='side-bumper'></div>
          <span>Pre Printing - <%= numberOfPrePrintingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Needs Attention - <span class='category-ticket-count'><%= prePrintingNeedsAttentionTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'></div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='pre-printing-needs-attention-table' class='table-body flex-center-center-column'>
              <% prePrintingNeedsAttentionTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width pre-printing-needs-attention-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>NEEDS ATTENTION</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white'></div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Pre Printing | On Hold -->
        <% const prePrintingOnHoldTickets = prePrintingTicketsGroupedByDepartmentStatus['ON HOLD'] %>
        <div class='status-section needs-attention-status card'>
          <div class='side-bumper'></div>
          <span>Pre Printing - <%= numberOfPrePrintingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>On Hold - <span class='category-ticket-count'><%= prePrintingOnHoldTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'></div>
              <div class='column-header column-header-h'>From</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='pre-printing-on-hold-table' class='table-body flex-center-center-column'>
              <% prePrintingOnHoldTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width pre-printing-on-hold-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>ON HOLD</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white'></div>
                  <div class='column-td column-td-h bg-white'></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Pre Printing | In Progress -->
        <% const prePrintingInProgressTickets = prePrintingTicketsGroupedByDepartmentStatus['IN PROGRESS'] %>
        <div class='status-section in-progress-status green-master card'>
          <div class='side-bumper'></div>
          <span>Pre Printing - <%= numberOfPrePrintingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>In Progress - <span class='category-ticket-count'><%= prePrintingInProgressTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Location</div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'></div>
              <div class='column-header column-header-h'></div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='pre-printing-in-progress-table' class='table-body flex-center-center-column'>
              <% prePrintingInProgressTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width pre-printing-in-progress-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-purple text-white department-status-column'>IN PROGRESS</div>
                  <div class='column-td column-td-e bg-white'>
                    <%- include('partials/assignee.ejs') -%>
                  </div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white'></div>
                  <div class='column-td column-td-h bg-white'></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Pre Printing | Send to Printing -->
        <% const prePrintingSendToPrintingTickets = prePrintingTicketsGroupedByDepartmentStatus['SEND TO PRINTING'] %>
        <div class='status-section purple-master card'>
          <div class='side-bumper'></div>
          <span>Pre Printing - <%= numberOfPrePrintingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Send To Printing - <span class='category-ticket-count'><%= prePrintingSendToPrintingTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'></div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='pre-printing-send-to-printing-table' class='table-body flex-center-center-column'>
              <% prePrintingSendToPrintingTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width pre-printing-send-to-printing-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %> </div>
                  <div class='column-td column-td-d bg-white department-status-column'>SEND TO PRINTING</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white'></div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>
      </div>
      <div class="department-end-frame flex-center-center-row full-width">
        <div class="department-divide-line"></div><h4>End Pre-Printing</h4><div class="department-divide-line"></div>
      </div>

      <!--- Printing Department Start -->
      <% const printingDepartmentName = 'PRINTING' %> 
      <% const printingTicketsGroupedByDepartmentStatus = ticketsGroupedByDestination[printingDepartmentName] %>
      <% const numberOfPrintingTickets = Object.values(printingTicketsGroupedByDepartmentStatus).flat().length %>
      <div class='department-wrapper' data-department="<%= printingDepartmentName %>">
        <h4 class='department-name'>Printing - <span class='text-blue' id='departmentTotalTickets'><%= numberOfPrintingTickets %></span></h4>
        
        <!-- Printing | On Hold -->
        <% const printingOnHoldTickets = printingTicketsGroupedByDepartmentStatus['ON HOLD'] %>
        <div class='status-section on-hold-status red-master card'>
          <div class='side-bumper'></div>
          <span>Printing - <%= numberOfPrintingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>On Hold - <span class='category-ticket-count'><%= printingOnHoldTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Hold Reason</div>
              <div class='column-header column-header-f'>Length</div>
              <div class='column-header column-header-g'>Material</div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='printing-on-hold-table' class='table-body flex-center-center-column'>
              <% printingOnHoldTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width printing-on-hold-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %> </div>
                  <div class='column-td column-td-d bg-white department-status-column'>ON HOLD</div>
                  <div class='column-td column-td-e bg-white on-hold-status-cell'>
                    <span class="hold-reason-text"><%= ticket.departmentToHoldReason && ticket.departmentToHoldReason.get(printingDepartmentName) %></span>
                    <%- include('partials/on-hold-dropdown', {
                      allHoldReasonsForThisDepartment: departmentToHoldReasons[printingDepartmentName],
                      departmentName: printingDepartmentName,
                      ticketId: ticket.id
                      }) 
                    -%>
                  </div>
                  <div class='column-td column-td-f bg-white length-column'><%= ticket.totalMaterialLength || 'N/A' %></div>
                  <div class='column-td column-td-g bg-white material-column'><%= ticket.primaryMaterial || 'N/A' %></div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Printing | In Progress -->
        <% const printingInProgressTickets = printingTicketsGroupedByDepartmentStatus['IN PROGRESS'] %>
        <div class='status-section in-progress-status green-master card'>
          <div class='side-bumper'></div>
          <span>Printing - <%= numberOfPrintingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>In Progress - <span class='category-ticket-count'><%= printingInProgressTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Location</div>
              <div class='column-header column-header-f'>Length</div>
              <div class='column-header column-header-g'>Material</div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='printing-in-progress-table' class='table-body flex-center-center-column'>
              <% printingInProgressTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width printing-in-progress-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }) 
                    %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber %> </div>
                  <div class='column-td column-td-d bg-purple text-white department-status-column'>IN PROGRESS</div>
                  <div class='column-td column-td-e bg-white'>
                      <%- include('partials/assignee.ejs') -%>
                  </div>
                  <div class='column-td column-td-f bg-white length-column'><%= ticket.totalMaterialLength || 'N/A' %></div>
                  <div class='column-td column-td-g bg-white material-column'><%= ticket.primaryMaterial || 'N/A' %></div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Printing | Printing Ready --> 
        <% const printingReadyTickets = printingTicketsGroupedByDepartmentStatus['PRINTING READY'] %>
        <div class='status-section purple-master card'>
          <div class='side-bumper'></div>
          <span>Printing - <%= numberOfPrintingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Print Ready - <span class='category-ticket-count'><%= printingReadyTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'>Length</div>
              <div class='column-header column-header-g'>Material</div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='printing-ready-table' class='table-body flex-center-center-column'>
              <% printingReadyTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width printing-ready-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber %></div>
                  <div class='column-td column-td-d bg-red text-white department-status-column'>PRINTING READY</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white length-column'><%= ticket.totalMaterialLength || 'N/A' %></div>
                  <div class='column-td column-td-g bg-white material-column'><%= ticket.primaryMaterial || 'N/A' %></div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Printing | Printer One Schedule -->
        <% const printingPrinterOneScheduleTickets = printingTicketsGroupedByDepartmentStatus['PRINTER ONE SCHEDULE'] %>
        <div class='status-section card'>
          <div class='side-bumper'></div>
          <span>Printing - <%= numberOfPrintingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Printer 1 Scheduled - <span class='category-ticket-count'><%= printingPrinterOneScheduleTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'>Length</div>
              <div class='column-header column-header-g'>Material</div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='printing-printer-one-schedule-table' class='table-body flex-center-center-column'>
              <% printingPrinterOneScheduleTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width printing-printer-one-schedule-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-red text-white department-status-column'>PRINTER ONE SCHEDULE</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white length-column'><%= ticket.totalMaterialLength || 'N/A' %></div>
                  <div class='column-td column-td-g bg-white material-column'><%= ticket.primaryMaterial || 'N/A' %></div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Printing | Printer Two Schedule -->
        <% const printingPrinterTwoScheduleTickets = printingTicketsGroupedByDepartmentStatus['PRINTER TWO SCHEDULE'] %>
        <div class='status-section card'>
          <div class='side-bumper'></div>
          <span>Printing - <%= numberOfPrintingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Printer 2 Scheduled - <span class='category-ticket-count'><%= printingPrinterTwoScheduleTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'>Length</div>
              <div class='column-header column-header-g'>Material</div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='printing-printer-two-schedule-table' class='table-body flex-center-center-column'>
              <% printingPrinterTwoScheduleTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width printing-printer-two-schedule-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %> </div>
                  <div class='column-td column-td-d bg-white department-status-column'>PRINTER TWO SCHEDULE</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white length-column'><%= ticket.totalMaterialLength || 'N/A' %></div>
                  <div class='column-td column-td-g bg-white material-column'><%= ticket.primaryMaterial || 'N/A' %></div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>
      </div>
      <div class="department-end-frame flex-center-center-row full-width">
        <div class="department-divide-line"></div><h4>End Printing</h4><div class="department-divide-line"></div>
      </div>

      <!--- Cutting Department Start -->
      <% const cuttingDepartmentName = 'CUTTING' %> 
      <% const cuttingTicketsGroupedByDepartmentStatus = ticketsGroupedByDestination[cuttingDepartmentName] %>
      <% const numberOfCuttingTickets = Object.values(cuttingTicketsGroupedByDepartmentStatus).flat().length %>
      <div class='department-wrapper' data-department="<%= cuttingDepartmentName %>">
        <h4 class='department-name'>Cutting - <span class='text-blue' id='departmentTotalTickets'><%= numberOfCuttingTickets %></span></h4>
        
        <!-- Cutting | On Hold -->
        <% const cuttingOnHoldTickets = cuttingTicketsGroupedByDepartmentStatus['ON HOLD'] %>
        <div class='status-section on-hold-status card'>
          <div class='side-bumper'></div>
          <span>Cutting - <%= numberOfCuttingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>On Hold - <span class='category-ticket-count'><%= cuttingOnHoldTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Hold Reason</div>
              <div class='column-header column-header-f'>Length</div>
              <div class='column-header column-header-g'>Material</div>
              <div class='column-header column-header-h'>From</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='cutting-on-hold-table' class='table-body flex-center-center-column'>
              <% cuttingOnHoldTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width cutting-on-hold-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %> </div>
                  <div class='column-td column-td-d bg-white department-status-column'>ON HOLD</div>
                  <div class='column-td column-td-e bg-white on-hold-status-cell'>
                    <span class='on-hold-reason-text'><%= ticket.departmentToHoldReason && ticket.departmentToHoldReason.get(cuttingDepartmentName) %></span>
                    <%- include('partials/on-hold-dropdown', {
                      allHoldReasonsForThisDepartment: departmentToHoldReasons[cuttingDepartmentName],
                      departmentName: cuttingDepartmentName,
                      ticketId: ticket.id
                      }) 
                    -%>
                  </div>
                  <div class='column-td column-td-f bg-white length-column'><%= ticket.totalMaterialLength || 'N/A' %></div>
                  <div class='column-td column-td-g bg-white material-column'><%= ticket.primaryMaterial || 'N/A' %></div>
                  <div class='column-td column-td-h bg-white'>*TODO*</div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Cutting | In Progress -->
        <% const cuttingInProgressTickets = cuttingTicketsGroupedByDepartmentStatus['IN PROGRESS'] %>
        <div class='status-section in-progress-status green-master card'>
          <div class='side-bumper'></div>
          <span>Cutting - <%= numberOfCuttingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>In Progress - <span class='category-ticket-count'><%= cuttingInProgressTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Location</div>
              <div class='column-header column-header-f'>Length</div>
              <div class='column-header column-header-g'>Die</div>
              <div class='column-header column-header-h'>Finish</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='cutting-in-progress-table' class='table-body flex-center-center-column'>
              <% cuttingInProgressTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width cutting-in-progress-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-purple text-white department-status-column'>IN PROGRESS</div>
                  <div class='column-td column-td-e bg-white'>
                    <%- include('partials/assignee.ejs') -%>
                  </div>
                  <div class='column-td column-td-f bg-white length-column'><%= ticket.totalMaterialLength || 'N/A' %></div>
                  <div class='column-td column-td-g bg-white die-column'><%= ticket.products && ticket.products[0].productDie %></div>
                  <div class='column-td column-td-h bg-white die-finish-column'><%= ticket.products && ticket.products[0].dieCuttingFinish %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Cutting | Cutting Ready -->
        <% const cuttingReadyTickets = cuttingTicketsGroupedByDepartmentStatus['CUTTING READY'] %>
        <div class='status-section purple-master card'>
          <div class='side-bumper'></div>
          <span>Cutting - <%= numberOfCuttingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Cutting Ready - <span class='category-ticket-count'><%= cuttingReadyTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'>Length</div>
              <div class='column-header column-header-g'>Die</div>
              <div class='column-header column-header-h'>Finish</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='cutting-ready-table' class='table-body flex-center-center-column'>
              <% cuttingReadyTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width cutting-ready-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>CUTTING READY</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white length-column'><%= ticket.totalMaterialLength || 'N/A' %></div>
                  <div class='column-td column-td-g bg-white die-column'><%= ticket.products && ticket.products[0].productDie %></div>
                  <div class='column-td column-td-h bg-white die-finish-column'><%= ticket.products && ticket.products[0].dieCuttingFinish %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/ticket-dropdown-options.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Cutting | Delta One Schedule -->
        <% const cuttingDeltaOneScheduleTickets = cuttingTicketsGroupedByDepartmentStatus['DELTA ONE SCHEDULE'] %>
        <div class='status-section card'>
          <div class='side-bumper'></div>
          <span>Cutting - <%= numberOfCuttingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Delta One Scheduled - <span class='category-ticket-count'><%= cuttingDeltaOneScheduleTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'>Length</div>
              <div class='column-header column-header-g'>Die</div>
              <div class='column-header column-header-h'>Finish</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='cutting-delta-one-schedule-table' class='table-body flex-center-center-column'>
              <% cuttingDeltaOneScheduleTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width cutting-delta-one-schedule-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>DELTA ONE SCHEDULE</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white length-column'><%= ticket.totalMaterialLength %> </div>
                  <div class='column-td column-td-g bg-white die-column'><%= ticket.products && ticket.products[0].productDie %></div>
                  <div class='column-td column-td-h bg-white die-finish-column'><%= ticket.products && ticket.products[0].dieCuttingFinish %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Cutting | Delta Two Schedule -->
        <% const cuttingDeltaTwoScheduleTickets = cuttingTicketsGroupedByDepartmentStatus['DELTA TWO SCHEDULE'] %>
        <div class='status-section card'>
          <div class='side-bumper'></div>
          <span>Cutting - <%= numberOfCuttingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Delta Two Scheduled - <span class='category-ticket-count'><%= cuttingDeltaTwoScheduleTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'>Length</div>
              <div class='column-header column-header-g'>Die</div>
              <div class='column-header column-header-h'>Finish</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='cutting-delta-two-schedule-table' class='table-body flex-center-center-column'>
              <% cuttingDeltaTwoScheduleTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width cutting-delta-two-schedule-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber %> </div>
                  <div class='column-td column-td-d bg-white department-status-column'>DELTA TWO SCHEDULE</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white length-column'><%= ticket.totalMaterialLength || 'N/A' %></div>
                  <div class='column-td column-td-g bg-white die-column'><%= ticket.products && ticket.products[0].productDie %></div>
                  <div class='column-td column-td-h bg-white die-finish-column'><%= ticket.products && ticket.products[0].dieCuttingFinish %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Cutting | RotoFlex One Schedule -->
        <% const cuttingRotoflexOneScheduleTickets = cuttingTicketsGroupedByDepartmentStatus['ROTOFLEX ONE SCHEDULE'] %>
        <div class='status-section card'>
          <div class='side-bumper'></div>
          <span>Cutting - <%= numberOfCuttingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Rotoflex One Scheduled - <span class='category-ticket-count'><%= cuttingRotoflexOneScheduleTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'>Length</div>
              <div class='column-header column-header-g'>Die</div>
              <div class='column-header column-header-h'>Finish</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='cutting-rotoflex-one-schedule-table' class='table-body flex-center-center-column'>
              <% cuttingRotoflexOneScheduleTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width cutting-rotoflex-one-schedule-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>ROTOFLEX ONE SCHEDULE</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white length-column'><%= ticket.totalMaterialLength || 'N/A' %></div>
                  <div class='column-td column-td-g bg-white die-column'><%= ticket.products && ticket.products[0].productDie %></div>
                  <div class='column-td column-td-h bg-white die-finish-column'><%= ticket.products && ticket.products[0].dieCuttingFinish %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>
      </div>
      <div class="department-end-frame flex-center-center-row full-width">
        <div class="department-divide-line"></div><h4>End Cutting</h4><div class="department-divide-line"></div>
      </div>

      <!--- Winding Department Start -->
      <% const windingDepartmentName = 'WINDING' %> 
      <% const windingTicketsGroupedByDepartmentStatus = ticketsGroupedByDestination[windingDepartmentName] %>
      <% const numberOfWindingTickets = Object.values(windingTicketsGroupedByDepartmentStatus).flat().length %>
      <div class='department-wrapper' data-department="<%= windingDepartmentName %>">
        <h4 class='department-name'>Winding - <span class='text-blue' id='departmentTotalTickets'><%= numberOfWindingTickets %></span></h4>
        
        <!-- Winding | On Hold -->
        <% const windingOnHoldTickets = windingTicketsGroupedByDepartmentStatus['ON HOLD'] %>
        <div class='status-section on-hold-status card'>
          <div class='side-bumper'></div>
          <span>Winding - <%= numberOfWindingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>On Hold - <span class='category-ticket-count'><%= windingOnHoldTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Hold Reason</div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'>Total Rolls</div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='winding-on-hold-table' class='table-body flex-center-center-column'>
              <% windingOnHoldTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width winding-on-hold-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>ON HOLD</div>
                  <div class='column-td column-td-e bg-white on-hold-status-cell'>
                    <span class='on-hold-reason-text'><%= ticket.departmentToHoldReason && ticket.departmentToHoldReason.get(windingDepartmentName) %></span>
                    <%- include('partials/on-hold-dropdown', {
                      allHoldReasonsForThisDepartment: departmentToHoldReasons[windingDepartmentName],
                      departmentName: windingDepartmentName,
                      ticketId: ticket.id
                      })
                    -%>
                  </div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white total-rolls-column'><%= ticket.totalWindingRolls %></div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Winding | In Progress -->
        <% const windingInProgressTickets = windingTicketsGroupedByDepartmentStatus['IN PROGRESS'] %>
        <div class='status-section in-progress-status green-master card'>
          <div class='side-bumper'></div>
          <span>Winding - <%= numberOfWindingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>In Progress - <span class='category-ticket-count'><%= windingInProgressTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Location</div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'>Rolls</div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='winding-in-progress-table' class='table-body flex-center-center-column'>
              <% windingInProgressTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width winding-in-progress-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-purple text-white department-status-column'>IN PROGRESS</div>
                  <div class='column-td column-td-e bg-white'>
                    <%- include('partials/assignee.ejs') -%>
                  </div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white total-rolls-column'><%= ticket.totalWindingRolls %></div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Winding | Winding Ready -->
        <% const windingReadyTickets = windingTicketsGroupedByDepartmentStatus['WINDING READY'] %>
        <div class='status-section purple-master card'>
          <div class='side-bumper'></div>
          <span>Winding - <%= numberOfWindingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Winding Ready - <span class='category-ticket-count'><%= windingReadyTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'>Rolls</div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='winding-ready-table' class='table-body flex-center-center-column'>
              <% windingReadyTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width winding-ready-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>WINDING READY</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white total-rolls-column'><%= ticket.totalWindingRolls %></div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/ticket-dropdown-options.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>
      </div>
      <div class="department-end-frame flex-center-center-row full-width">
        <div class="department-divide-line"></div><h4>End Winding</h4><div class="department-divide-line"></div>
      </div>

      <!--- Packaging Department Start -->
      <% const packagingDepartmentName = 'PACKAGING' %> 
      <% const packagingTicketsGroupedByDepartmentStatus = ticketsGroupedByDestination[packagingDepartmentName] %>
      <% const numberOfPackagingTickets = Object.values(packagingTicketsGroupedByDepartmentStatus).flat().length %>
      <div class='department-wrapper' data-department="<%= packagingDepartmentName %>">
        <h4 class='department-name'>Packaging - <span class='text-blue' id='departmentTotalTickets'><%= numberOfPackagingTickets %> </span></h4>
        
        <!-- Packaging | On Hold -->
        <% const packagingOnHoldTickets = packagingTicketsGroupedByDepartmentStatus['ON HOLD'] %>
        <div class='status-section on-hold-status card'>
          <div class='side-bumper'></div>
          <span>Packaging - <%= numberOfPackagingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>On Hold - <span class='category-ticket-count'><%= packagingOnHoldTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Hold Reason</div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'>Grouped</div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='packaging-on-hold-table' class='table-body flex-center-center-column'>
              <% packagingOnHoldTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width packaging-on-hold-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>ON HOLD</div>
                  <div class='column-td column-td-e bg-white on-hold-status-cell'>
                    <span class='on-hold-reason-text'><%= ticket.departmentToHoldReason && ticket.departmentToHoldReason.get(packagingDepartmentName) %></span>
                    <%- include('partials/on-hold-dropdown', {
                      allHoldReasonsForThisDepartment: departmentToHoldReasons[packagingDepartmentName],
                      departmentName: packagingDepartmentName,
                      ticketId: ticket.id
                      }) 
                    -%>
                  </div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white grouping-indicator'>
                    <%- include('partials/job-grouping-indicator.ejs') -%>
                  </div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Packaging | In Progress -->
        <% const packagingInProgressTickets = packagingTicketsGroupedByDepartmentStatus['IN PROGRESS'] %>
        <div class='status-section in-progress-status green-master card'>
          <div class='side-bumper'></div>
          <span>Packaging - <%= numberOfPackagingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>In Progress - <span class='category-ticket-count'><%= packagingInProgressTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Location</div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'>Grouped</div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='packaging-in-progress-table' class='table-body flex-center-center-column'>
              <% packagingInProgressTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width packaging-in-progress-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-purple text-white department-status-column'>IN PROGRESS</div>
                  <div class='column-td column-td-e bg-white'>
                    <%- include('partials/assignee.ejs') -%>
                  </div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white grouping-indicator'>
                    <%- include('partials/job-grouping-indicator.ejs') -%>
                  </div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Packaging | Packaging Ready -->
        <% const packagingReadyTickets = packagingTicketsGroupedByDepartmentStatus['PACKAGING READY'] %>
        <div class='status-section purple-master card'>
          <div class='side-bumper'></div>
          <span>Packaging - <%= numberOfPackagingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Packaging Ready - <span class='category-ticket-count'><%= packagingReadyTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'>Grouped</div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='packaging-ready-table' class='table-body flex-center-center-column'>
              <% packagingReadyTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width packaging-ready-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>PACKAGING READY</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white grouping-indicator'>
                    <%- include('partials/job-grouping-indicator.ejs') -%>
                  </div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/ticket-dropdown-options.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>
      </div>
      <div class="department-end-frame flex-center-center-row full-width">
        <div class="department-divide-line"></div><h4>End Packaging</h4><div class="department-divide-line"></div>
      </div>

      <!--- Shipping Department Start-->
      <% const shippingDepartmentName = 'SHIPPING' %>
      <% const shippingTicketsGroupedByDepartmentStatus = ticketsGroupedByDestination[shippingDepartmentName] %>
      <% const numberOfShippingTickets = Object.values(shippingTicketsGroupedByDepartmentStatus).flat().length %>
      <div class='department-wrapper' data-department="<%= shippingDepartmentName %>">
        <h4 class='department-name'>Shipping - <span class='text-blue' id='departmentTotalTickets'><%= numberOfShippingTickets %></span></h4>
        
        <!-- Shipping | On Hold -->
        <% const shippingOnHoldTickets = shippingTicketsGroupedByDepartmentStatus['ON HOLD'] %>
        <div class='status-section on-hold-status card'>
          <div class='side-bumper'></div>
          <span>Shipping - <%= numberOfShippingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>On Hold - <span class='category-ticket-count'><%= shippingOnHoldTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Hold Reason</div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'>Grouped</div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='shipping-on-hold-table' class='table-body flex-center-center-column'>
              <% shippingOnHoldTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width shipping-on-hold-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>ON HOLD</div>
                  <div class='column-td column-td-e bg-white on-hold-status-cell'>
                    <span class='on-hold-reason-text'><%= ticket.departmentToHoldReason && ticket.departmentToHoldReason.get(shippingDepartmentName) %></span>
                    <%- include('partials/on-hold-dropdown', {
                      allHoldReasonsForThisDepartment: departmentToHoldReasons[shippingDepartmentName],
                      departmentName: shippingDepartmentName,
                      ticketId: ticket.id
                      }) 
                    -%>
                  </div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white grouping-indicator'>
                    <%- include('partials/job-grouping-indicator.ejs') -%>
                  </div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/ticket-dropdown-options.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Shipping | In Progress -->
        <% const shippingInProgressTickets = shippingTicketsGroupedByDepartmentStatus['IN PROGRESS'] %>
        <div class='status-section in-progress-status green-master card'>
          <div class='side-bumper'></div>
          <span>Shipping - <%= numberOfShippingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>In Progress - <span class='category-ticket-count'><%= shippingInProgressTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'>Grouped</div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='shipping-in-progress-table' class='table-body flex-center-center-column'>
              <% shippingInProgressTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width shipping-in-progress-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-purple text-white department-status-column'>IN PROGRESS</div>
                  <div class='column-td column-td-e bg-white'>
                    <%- include('partials/assignee.ejs') -%>
                  </div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white grouping-indicator'>
                    <%- include('partials/job-grouping-indicator.ejs') -%>
                  </div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Shipping | Shipping Ready -->
        <% const shippingReadyTickets = shippingTicketsGroupedByDepartmentStatus['SHIPPING READY'] %>
        <div class='status-section purple-master card'>
          <div class='side-bumper'></div>
          <span>Shipping - <%= numberOfShippingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Ready For Shipping - <span class='category-ticket-count'><%= shippingReadyTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'>Grouped</div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='shipping-ready-table' class='table-body flex-center-center-column'>
              <% shippingReadyTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width shipping-ready-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>SHIPPING READY</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white grouping-indicator'>
                    <%- include('partials/job-grouping-indicator.ejs') -%>
                  </div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/ticket-dropdown-options.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Shipping | Farmed Out Tickets -->
        <% const shippingFarmedOutTicketsTickets = shippingTicketsGroupedByDepartmentStatus['FARMED OUT TICKETS'] %>
        <div class='status-section card'>
          <div class='side-bumper'></div>
          <span>Shipping - <%= numberOfShippingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Farmed Out Jobs - <span class='category-ticket-count'><%= shippingFarmedOutTicketsTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'></div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='shipping-farmed-out-tickets-table' class='table-body flex-center-center-column'>
              <% shippingFarmedOutTicketsTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width shipping-farmed-out-tickets-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %></div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>FARMED OUT TICKETS</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white'></div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>
      </div>
      <div class="department-end-frame flex-center-center-row full-width">
        <div class="department-divide-line"></div><h4>End Shipping</h4><div class="department-divide-line"></div>
      </div>

      <!-- Billing Department Start -->
      <% billingDepartmentName = 'BILLING' %> 
      <% const billingTicketsGroupedByDepartmentStatus = ticketsGroupedByDestination[billingDepartmentName] %>
      <% const numberOfBillingTickets = Object.values(billingTicketsGroupedByDepartmentStatus).flat().length %>
      <div class='department-wrapper' data-department="<%= billingDepartmentName %>">
        <h4 class='department-name'>Billing - <span class='text-blue' id='departmentTotalTickets'><%= numberOfBillingTickets %></span></h4>
        
        <!-- Billing | On Hold -->
        <% const billingOnHoldTickets = billingTicketsGroupedByDepartmentStatus['ON HOLD'] %>
        <div class='status-section in-progress-status green-master card'>
          <div class='side-bumper'></div>
          <span>Billing - <%= numberOfBillingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>On Hold - <span class='category-ticket-count'><%= billingOnHoldTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Hold Reason</div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'></div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='billing-on-hold-table' class='table-body flex-center-center-column'>
              <% billingOnHoldTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width billing-on-hold-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>ON HOLD</div>
                  <div class='column-td column-td-e bg-white on-hold-status-cell'>
                    <span class='on-hold-reason-text'><%= ticket.departmentToHoldReason && ticket.departmentToHoldReason.get(billingDepartmentName) %></span>
                    <%- include('partials/on-hold-dropdown', {
                      allHoldReasonsForThisDepartment: departmentToHoldReasons[billingDepartmentName],
                      departmentName: billingDepartmentName,
                      ticketId: ticket.id
                      }) 
                    -%>
                  </div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white'></div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/ticket-dropdown-options.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Billing | In Progress -->
        <% const billingInProgressTickets = billingTicketsGroupedByDepartmentStatus['IN PROGRESS'] %>
        <div class='status-section ready-for-billing-status purple-master card'>
          <div class='side-bumper'></div>
          <span>Billing - <%= numberOfBillingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>In Progress - <span class='category-ticket-count'><%= billingInProgressTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'>Location</div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'></div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='billing-ready-for-billing-table' class='table-body flex-center-center-column'>
              <% billingInProgressTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width shipping-in-progress-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-purple text-white department-status-column'>IN PROGRESS</div>
                  <div class='column-td column-td-e bg-white'><%- include('partials/assignee.ejs') -%></div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white'></div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/products-wrapper.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

        <!-- Billing | Billing Ready -->
        <% const billingReadyTickets = billingTicketsGroupedByDepartmentStatus['BILLING READY'] %>
        <div class='status-section in-progress-status green-master card'>
          <div class='side-bumper'></div>
          <span>Billing - <%= numberOfBillingTickets %></span>
          <div class='header flex-center-left-row'>
            <%- include('partials/department-expand-options.ejs') %>
            <h3 class='category-header collapse-group-cheater'>Billing Ready - <span class='category-ticket-count'><%= billingReadyTickets.length %></span></h3>
          </div>
          <div class='table ticket-container flex-top-center-column'>
            <div class='table-header flex-center-center-row'>
              <div class='column-header column-header-a'></div>
              <div class='column-header column-header-b'>#</div>
              <div class='column-header column-header-c'>Ticket Number</div>
              <div class='column-header column-header-d'>Status</div>
              <div class='column-header column-header-e'></div>
              <div class='column-header column-header-f'></div>
              <div class='column-header column-header-g'></div>
              <div class='column-header column-header-h'>Products</div>
              <div class='column-header column-header-i'>Due Date</div>
            </div>
            <div id='billing-ready-table' class='table-body flex-center-center-column'>
              <% billingReadyTickets.forEach((ticket, index) => { %>
              <div id='ticket-row-<%= ticket._id %>' class='table-row-wrapper full-width billing-ready-row' data-ticket-id="<%= ticket._id %>">
                <%- include('partials/start-job-modal.ejs', {
                  ticket: ticket
                  }
              ) %>
                <div class='table-row flex-center-center-row'>
                  <div class='column-td column-td-a'>
                    <i class='fa-light fa-ellipsis-vertical text-white'></i>
                    <%- include('partials/ticket-dropdown-options.ejs', {
                      ticket: ticket
                      }
                  ) %>
                  </div>
                  <div class='column-td column-td-b bg-white row-number'><%= index + 1 %> </div>
                  <div class='column-td column-td-c bg-white ticket-number-column'>#<%= ticket.ticketNumber || 'N/A' %></div>
                  <div class='column-td column-td-d bg-white department-status-column'>BILLING READY</div>
                  <div class='column-td column-td-e bg-white'></div>
                  <div class='column-td column-td-f bg-white'></div>
                  <div class='column-td column-td-g bg-white'></div>
                  <div class='column-td column-td-h bg-white product-count-column'><%= ticket.products.length %></div>
                  <div class='column-td column-td-i bg-white due-date-column'><%= helperMethods.getSimpleDate(ticket.shipDate) %></div>
                </div>
                <%- include('partials/ticket-dropdown-options.ejs', {
                  ticket: ticket
                  }
              ) %>
              </div>
              <% }) %>
            </div>
          </div>
        </div>

      </div>
      <div class="department-end-frame flex-center-center-row full-width">
        <div class="department-divide-line"></div><h4>End Billing</h4><div class="department-divide-line"></div>
      </div>

       <%- include('partials/department-status-clones.ejs') %>
       <%- include('partials/product-clone.ejs') %>
  </div>
</div>


