<h1>Update Winding Setup</h1>

<form action="/winding-setups/update/<%= windingSetup.id %>", method="POST">
    <label for="author">Author</label>
    <select name="author" id="author">
        <% if (typeof users != 'undefined') { %>
            <% users.forEach(user => { %>
                <% const isSelected = user.id == windingSetup.author._id ? 'selected' : ''; %>
                <option value="<%= user.id %>" <%= isSelected %>><%= user.email || 'N/A' %></option>
            <% }) %>
        <% } %>
      </select>
    <br>
    <label for="machine">Machine</label>
    <select name="machine" id="machine">
        <% if (typeof machines != 'undefined') { %>
            <% machines.forEach(machine => { %>
                <% const isSelected = machine.id == windingSetup.machine._id ? 'selected' : ''; %>
                <option value="<%= machine.id %>" <%= isSelected %>><%= machine.name || 'N/A' %></option>
            <% }) %>
        <% } %>
      </select>
    <br>
    <label for="notes">Notes</label>
    <input type="text" name="notes" id="notes" value="<%= windingSetup.notes %>">
    <br>
    <label for="video">Video</label>
    <input type="text" name="video" id="video" value="<%= windingSetup.video %>">
    <br>
    <label for="video">Watch out For</label>
    <select name="watchOutFor" id="watchOutFor" multiple>
        <% const watchOutForEnum = ['FLAGS', 'UV MISSING', 'BUTT CUT', 'MISSING LABELS', 'LABELS CUT OFF']; %>
        <% watchOutForEnum.forEach((watchOutFor) => { %>
            <% let isSelected = ''; %>
            <% if (windingSetup.watchOutFor.includes(watchOutFor.toUpperCase())) { %>
                <% isSelected = 'selected'; %>
            <% } %>
            <option value="<%= watchOutFor %>" <%= isSelected %>><%= watchOutFor %></option>
        <% }) %>
    </select>
    <br>
    <label for="difficulty">Difficulty</label>
    <select name="difficulty" id="difficulty">
        <% const difficultyEnum = ['Easy', 'Medium', 'Hard', 'Very Difficult']; %>
        <% difficultyEnum.forEach(difficulty => { %>
            <% let isSelected = ''; %>
            <% if (difficulty.toUpperCase() === windingSetup.difficulty.toUpperCase()) { %>
                <% isSelected = 'selected'; %>
            <% } %>
            <option value="<%= difficulty %>" <%= isSelected %>><%= difficulty %></option>
        <% }) %>
    </select>
    <br>
    <label for="difficulty">Is Backwinding Required?</label>
    <select name="backWinding" id="backWinding">
        <% if (windingSetup.backWinding) { %>
            <option value="true" selected>Yes</option>
            <option value="false">No</option>
        <% } else { %>
            <option value="true">Yes</option>
            <option value="false" selected>No</option>
        <% } %>
    </select>
    <br>
    <label for="alertTextBox">Alert Text Box</label>
    <input type="text" name="alertTextBox" id="alertTextBox" value="<%= windingSetup.alertTextBox %>">
    <br>
    <label for="defaultMachine">Default Machine</label>
    <select name="defaultMachine" id="defaultMachine">
        <% if (typeof machines != 'undefined') { %>
            <% machines.forEach(machine => { %>
                <% const isSelected = machine.id == windingSetup.defaultMachine._id ? 'selected' : ''; %>
                <option value="<%= machine.id %>" <%= isSelected %>><%= machine.name || 'N/A' %></option>
            <% }) %>
        <% } %>
      </select>
      <input type="hidden" name="recipe" id="recipe" value="<%= windingSetup.recipe %>">
    <br>
    <input type="submit" value="Update Winding Setup">
</form>